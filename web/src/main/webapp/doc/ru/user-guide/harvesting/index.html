<!DOCTYPE html>
<html class="writer-html5" lang="ru-RU" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Сбор урожая &mdash; GeoNetwork opensource v3.12 GeoNetwork Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Алфавитный указатель" href="../../genindex.html" />
    <link rel="search" title="Поиск" href="../../search.html" />
    <link rel="next" title="Сборщик GeoNetwork 2.0" href="harvesting-geonetwork.html" />
    <link rel="prev" title="Обновление набора записей с помощью XSLT" href="../workflow/batchupdate-xsl.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> GeoNetwork opensource
          </a>
              <div class="version">
                3.12
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview/index.html">Обзор</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install-guide/index.html">Installation guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Гид пользователя</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../quick-start/index.html">Быстрый старт</a></li>
<li class="toctree-l2"><a class="reference internal" href="../map/index.html">Maps and dataset visualisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../describing-information/index.html">Описание информации</a></li>
<li class="toctree-l2"><a class="reference internal" href="../associating-resources/index.html">Связывание ресурсов</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tag-information/index.html">Классифицировать информацию</a></li>
<li class="toctree-l2"><a class="reference internal" href="../publishing/index.html">Издательский</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analyzing/index.html">Анализ данных</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workflow/index.html">Рабочий процесс</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Сбор урожая</a><ul>
<li class="toctree-l3"><a class="reference internal" href="harvesting-geonetwork.html">Сборщик GeoNetwork 2.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-csw.html">Сбор услуг CSW</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-ogcwxs.html">Сбор услуг OGC</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-filesystem.html">Сбор данных в локальной файловой системе</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-webdav.html">WEBDAV Сбор урожая</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-oaipmh.html">Сбор урожая OAIPMH</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-sde.html">Сбор узла ARCSDE</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-geoportal.html">Сбор данных GeoPortal REST</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-thredds.html">РЕЗЬБЫ Сбор урожая</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-wfs-features.html">Сбор данных WFS GetFeature</a></li>
<li class="toctree-l3"><a class="reference internal" href="harvesting-z3950.html">Z3950 Сбор урожая</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mechanism-overview">Обзор механизма</a></li>
<li class="toctree-l3"><a class="reference internal" href="#harvesting-life-cycle">Жизненный цикл сбора урожая</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-harvesting-and-hierarchies">Множественный сбор урожая и иерархии</a></li>
<li class="toctree-l3"><a class="reference internal" href="#harvesting-fragments-of-metadata-to-support-re-use">Сбор фрагментов метаданных для поддержки повторного использования</a></li>
<li class="toctree-l3"><a class="reference internal" href="#https-support">поддержка HTTPS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-main-page">Главная страница</a></li>
<li class="toctree-l3"><a class="reference internal" href="#harvesting-status-and-error-icons">Значки состояния и ошибок сбора урожая</a></li>
<li class="toctree-l3"><a class="reference internal" href="#harvesting-result-tips">Советы по сбору урожая</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-new-harvesters">Добавление новых комбайнов</a></li>
<li class="toctree-l3"><a class="reference internal" href="#harvest-history">История урожая</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../export/index.html">Экспорт записей</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../administrator-guide/index.html">Руководство администратора</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer-guide/index.html">Руководство сопровождающего</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Руководство по API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Руководство по содействию</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../customizing-application/index.html">Руководство по настройке</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Учебники</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../annexes/index.html">Приложения</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GeoNetwork opensource</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Гид пользователя</a> &raquo;</li>
      <li>Сбор урожая</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/geonetwork/doc/blob/develop/source/user-guide/harvesting/index.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="harvesting">
<span id="id1"></span><h1>Сбор урожая<a class="headerlink" href="#harvesting" title="Permalink to this heading">¶</a></h1>
<p>Data discovery gets more interesting once multiple catalogs and services
share their resources.</p>
<p>Сбор — это процесс приема метаданных из удаленных источников и их локального хранения в каталоге для быстрого поиска. Это запланированный процесс, поэтому локальная копия и удаленные метаданные всегда согласованы.</p>
<p>Можно собирать следующие источники:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="harvesting-geonetwork.html">Сборщик GeoNetwork 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-csw.html">Сбор услуг CSW</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-csw.html#adding-a-csw-harvester">Добавление комбайна CSW</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-csw.html#notes">Примечания</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-ogcwxs.html">Сбор услуг OGC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-ogcwxs.html#adding-an-ogc-service-harvester">Добавление OGC Service Harvester</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-ogcwxs.html#notes">Примечания</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-filesystem.html">Сбор данных в локальной файловой системе</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-filesystem.html#adding-a-local-file-system-harvester">Добавление сборщика локальной файловой системы</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-filesystem.html#notes">Примечания</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-webdav.html">WEBDAV Сбор урожая</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-webdav.html#adding-a-webdav-harvester">Добавление сборщика данных WebDAV</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-webdav.html#notes">Примечания</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-oaipmh.html">Сбор урожая OAIPMH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-oaipmh.html#adding-an-oai-pmh-harvester">Добавление харвестера OAI-PMH</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-oaipmh.html#notes">Примечания</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-sde.html">Сбор узла ARCSDE</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-sde.html#adding-an-arcsde-harvester">Добавление харвестера ArcSDE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-geoportal.html">Сбор данных GeoPortal REST</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-geoportal.html#adding-a-geoportal-rest-harvester">Добавление сборщика GeoPortal REST</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-geoportal.html#notes">Примечания</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-thredds.html">РЕЗЬБЫ Сбор урожая</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-thredds.html#adding-a-thredds-catalog-harvester">Добавление сборщика каталогов THREDDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-thredds.html#more-about-harvesting-thredds-dif-metadata-elements-with-the-thredds-harvester">Подробнее о сборе элементов метаданных THREDDS DIF с помощью THREDDS Harvester</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-thredds.html#more-about-harvesting-unidata-dataset-discovery-metadata-with-the-thredds-harvester">Подробнее о сборе метаданных обнаружения наборов данных Unidata с помощью THREDDS Harvester</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-thredds.html#example">Пример</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-wfs-features.html">Сбор данных WFS GetFeature</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-wfs-features.html#adding-an-ogc-wfs-getfeature-harvester">Добавление сборщика OGC WFS GetFeature</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-wfs-features.html#more-about-turning-the-getfeature-response-into-metadata-fragments">Подробнее о превращении ответа GetFeature во фрагменты метаданных</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-wfs-features.html#bundled-geoserver-boundaries-harvest-example">Связанный пример GeoServer Boundaries Harvest</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-wfs-features.html#deegree-version-2-x-philosopher-database-example">Пример базы данных философов Deegree версии 2.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="harvesting-z3950.html">Z3950 Сбор урожая</a><ul>
<li class="toctree-l2"><a class="reference internal" href="harvesting-z3950.html#adding-a-z3950-harvester">Добавление комбайна Z3950</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-z3950.html#more-about-pqf-z3950-queries">Подробнее о запросах PQF Z3950</a></li>
<li class="toctree-l2"><a class="reference internal" href="harvesting-z3950.html#notes">Примечания</a></li>
</ul>
</li>
</ul>
</div>
<section id="mechanism-overview">
<h2>Обзор механизма<a class="headerlink" href="#mechanism-overview" title="Permalink to this heading">¶</a></h2>
<p>Механизм сбора основан на концепции «универсального уникального идентификатора (UUID)». Это специальный идентификатор, потому что он уникален не только локально для узла, который его сгенерировал, но и глобально уникален. Это сочетание:</p>
<ul class="simple">
<li><p>MAC-адрес сетевого интерфейса,</p></li>
<li><p>текущая дата/время</p></li>
<li><p>и случайное число.</p></li>
</ul>
<p>Для каждой новой записи генерируется и присваивается UUID.</p>
<p>Другой важной концепцией сбора урожая является «дата последнего изменения». Каждый раз, когда вы меняете запись метаданных, обновляется дата последнего изменения. Простое сохранение этого параметра и сравнение его с новым позволяет любой системе узнать, была ли изменена запись метаданных с момента последнего обновления.</p>
<p>Эти две концепции позволяют каталогам извлекать удаленные метаданные, проверять, были ли они обновлены, и удалять их локально, если они были удалены удаленно. UUID также позволяли собирать данные из кросс-каталога в случае, когда B собирал урожай из C, а A собирал урожай из B.</p>
</section>
<section id="harvesting-life-cycle">
<h2>Жизненный цикл сбора урожая<a class="headerlink" href="#harvesting-life-cycle" title="Permalink to this heading">¶</a></h2>
<p>Когда создается сборщик, собранные метаданные отсутствуют. Во время первого запуска все удаленные совпадающие метаданные извлекаются и сохраняются локально. Для некоторых харвестеров после первого запуска будут извлечены только измененные метаданные.</p>
<p>Собранные метаданные (по умолчанию) недоступны для редактирования по следующим причинам:</p>
<ol class="arabic simple">
<li><p>Сбор осуществляется периодически, поэтому любое локальное изменение собранных метаданных будет потеряно при следующем запуске.</p></li>
<li><p>Дата изменения может использоваться для отслеживания изменений, поэтому, если метаданные будут изменены, механизм сбора данных может быть скомпрометирован.</p></li>
</ol>
<p>Свойства метаданных (такие как категории, привилегии и т. д.) в собранных записях метаданных могут быть обновлены, но они будут обновлены при следующем запуске.</p>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>если вы действительно хотите редактировать собранные записи метаданных и не беспокоитесь о возможных проблемах, описанных выше, теперь есть параметр конфигурации, который позволит это сделать. Подробнее см. <a class="reference internal" href="../../administrator-guide/configuring-the-catalog/system-configuration.html#editing-harvested-records"><span class="std std-ref">Сбор урожая</span></a>.</p>
<p>Другим вариантом может быть назначение собранных записей в локальный каталог, а затем их изменение. Пока ни один интерфейс не позволяет изменить исходный каталог записи.</p>
</div>
<p>Процесс сбора урожая продолжается до тех пор, пока не возникнет одна из следующих ситуаций:</p>
<ol class="arabic simple">
<li><p>Администратор останавливает (деактивирует) комбайн.</p></li>
<li><p>Возникает исключение. В этом случае комбайн автоматически останавливается.</p></li>
</ol>
<p>При удалении харвестера удаляются все записи метаданных, связанные с этим харвестером.</p>
</section>
<section id="multiple-harvesting-and-hierarchies">
<h2>Множественный сбор урожая и иерархии<a class="headerlink" href="#multiple-harvesting-and-hierarchies" title="Permalink to this heading">¶</a></h2>
<p>Каталоги, которые используют UUID для идентификации записей метаданных (например, GeoNetwork), могут собираться несколько раз, не заботясь о перекрытии метаданных.</p>
<p>В качестве примера рассмотрим тип сбора GeoNetwork, который позволяет одному узлу GeoNetwork собирать записи метаданных с другого узла GeoNetwork, и следующий сценарий:</p>
<ol class="arabic simple">
<li><p>Узел (A) создал метаданные (a)</p></li>
<li><p>Узел (B) собирает урожай (a) из (A)</p></li>
<li><p>Узел (C) собирает урожай (a) из (B)</p></li>
<li><p>Узел (D) собирает урожай из (A), (B) и (C)</p></li>
</ol>
<p>В этом сценарии узел (D) получит одни и те же метаданные (a) от всех трех узлов (A), (B), (C). Метаданные будут поступать в (D) по трем различным путям, но благодаря его UUID будет сохранена только одна копия. Когда (a) изменено в (A), новая версия будет передана (D), но благодаря дате изменения копия в (D) будет обновлена самой последней версией.</p>
</section>
<section id="harvesting-fragments-of-metadata-to-support-re-use">
<span id="harvesting-fragments"></span><h2>Сбор фрагментов метаданных для поддержки повторного использования<a class="headerlink" href="#harvesting-fragments-of-metadata-to-support-re-use" title="Permalink to this heading">¶</a></h2>
<p>Все сборщики, кроме сборщика THREDDS и OGC WFS GetFeature, создают полную запись метаданных, которая вставляется в существующую запись в каталоге или заменяет ее. Однако часто бывает так:</p>
<ul class="simple">
<li><p>метаданные, полученные из внешнего источника, на самом деле представляют собой только один или несколько фрагментов метаданных, необходимых для описания ресурса, такого как набор данных.</p></li>
<li><p>вы можете объединить собранные фрагменты метаданных с введенными вручную или статическими метаданными в одной записи</p></li>
<li><p>фрагмент метаданных, собранных из внешнего источника, может потребоваться более чем в одной записи метаданных</p></li>
</ul>
<p>Например, вас может интересовать только сбор географического экстента и/или контактной информации из внешнего источника и ручной ввод или сохранение остальной части содержимого в записи метаданных. Вас также может заинтересовать повторное использование контактной информации человека или организации в более чем одной записи метаданных.</p>
<p>Для поддержки этой возможности как сборщик WFS GetFeature, так и сборщик THREDDS позволяют собирать фрагменты метаданных и связывать или копировать их в запись шаблона для создания записей метаданных. Фрагменты, сохраненные в базе данных GeoNetwork, называются подшаблонами и могут использоваться более чем в одной записи метаданных.</p>
<p>Как показано выше, примером фрагмента метаданных является элемент gmd:contactInfo документа iso19139. Этот элемент содержит контактные данные физического лица или организации. Если фрагмент хранится в базе данных GeoNetwork в качестве подшаблона для данного лица или организации, то на этот фрагмент можно ссылаться в записях метаданных, где эта организация или лицо указывается с помощью механизма связывания XML, называемого XLink.</p>
</section>
<section id="https-support">
<h2>поддержка HTTPS<a class="headerlink" href="#https-support" title="Permalink to this heading">¶</a></h2>
<p>Для сбора данных между узлами GeoNetwork может потребоваться протокол HTTPS. При сборе данных с URL-адреса https GeoNetwork сервер должен иметь доверенный сертификат, доступный в хранилище ключей JVM, доступном для узла GeoNetwork, выполняющего сбор данных.</p>
<p>Если у вас нет доверенного сертификата в хранилище ключей JVM, используемом GeoNetwork, сборщик может выдать исключение, подобное этому, когда вы пытаетесь собрать данные из https GeoNetwork:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">javax</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">ssl</span><span class="o">.</span><span class="n">SSLHandshakeException</span><span class="p">:</span>
   <span class="n">sun</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">validator</span><span class="o">.</span><span class="n">ValidatorException</span><span class="p">:</span> <span class="n">PKIX</span> <span class="n">path</span> <span class="n">building</span> <span class="n">failed</span><span class="p">:</span>
   <span class="n">sun</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">certpath</span><span class="o">.</span><span class="n">SunCertPathBuilderException</span><span class="p">:</span>
   <span class="n">unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">valid</span> <span class="n">certification</span> <span class="n">path</span> <span class="n">to</span> <span class="n">requested</span> <span class="n">target</span>

<span class="n">Caused</span> <span class="n">by</span><span class="p">:</span> <span class="n">sun</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">validator</span><span class="o">.</span><span class="n">ValidatorException</span><span class="p">:</span>
   <span class="n">PKIX</span> <span class="n">path</span> <span class="n">building</span> <span class="n">failed</span><span class="p">:</span> <span class="n">sun</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">certpath</span><span class="o">.</span><span class="n">SunCertPathBuilderException</span><span class="p">:</span>
   <span class="n">unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">valid</span> <span class="n">certification</span> <span class="n">path</span> <span class="n">to</span> <span class="n">requested</span> <span class="n">target</span>

<span class="n">Caused</span> <span class="n">by</span><span class="p">:</span> <span class="n">sun</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">certpath</span><span class="o">.</span><span class="n">SunCertPathBuilderException</span><span class="p">:</span>
   <span class="n">unable</span> <span class="n">to</span> <span class="n">find</span> <span class="n">valid</span> <span class="n">certification</span> <span class="n">path</span> <span class="n">to</span> <span class="n">requested</span> <span class="n">target</span>
</pre></div>
</div>
<p>Сертификат сервера для собираемого сервера GeoNetwork необходимо добавить в хранилище ключей JVM с помощью <a href="#id1"><span class="problematic" id="id2">`</span></a>keytool&lt;<a class="reference external" href="http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html">http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html</a>&gt; <a href="#id3"><span class="problematic" id="id4">`</span></a>_ чтобы заслужить доверие.</p>
<p>Альтернативным способом добавления сертификата является использование скрипта вида:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>## JAVA SSL Certificate import script
## Based on original MacOs script by LouiSe@louise.hu : http://louise.hu
##
## Usage: ./ssl_key_import.sh &lt;sitename&gt; &lt;port&gt;
##
## Example: ./ssl_key_import.sh mail.google.com 443 (to read certificate from https://mail.google.com)

## Compile and start
javac InstallCert.java
java InstallCert $1:$2

## Copy new cert into local JAVA keystore
echo &quot;Please, enter administrator password:&quot;
sudo cp jssecacerts $JAVA_HOME/jre/lib/security/jssecacerts
# Comment previous line and uncomment next one for MacOs
#sudo cp jssecacerts /Library/Java/Home/lib/security/
</pre></div>
</div>
<p>Для использования скрипта должен быть установлен компилятор Java и файл <a href="#id3"><span class="problematic" id="id4">`InstallCert.java.&lt;http://code.google.com/p/java-use-examples/source/browse/trunk/src/com/aw/ad/util/InstallCert.java&gt;`_</span></a>, необходимо скачать и поместить в тот же каталог, что и скрипт.</p>
<p>Скрипт добавит сертификат в хранилище ключей JVM, если вы запустите его следующим образом::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./ssl_key_import.sh https_server_name 443
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Используйте этот скрипт на свой страх и риск! Перед установкой сертификата в хранилище ключей JVM в качестве доверенного убедитесь, что вы понимаете последствия для безопасности.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>После добавления сертификата вам потребуется перезапустить GeoNetwork.</p>
</div>
</section>
<section id="the-main-page">
<h2>Главная страница<a class="headerlink" href="#the-main-page" title="Permalink to this heading">¶</a></h2>
<p>To access the harvesting main page you have to be logged in as an administrator.
From the administration page, select the harvest shortcut.
The harvesting main page will then be displayed.</p>
<p>На странице отображается список установленных на данный момент комбайнов и набор кнопок для функций управления. Значение каждого столбца в списке комбайнов следующее:</p>
<ol class="arabic simple">
<li><p><em>Выбрать</em> Установите флажок, чтобы выбрать один или несколько комбайнов. На выбранные комбайны будет влиять первый ряд кнопок (активировать, деактивировать, запустить, удалить). Например, если выбрать три комбайна и нажать кнопку «Удалить», все они будут удалены.</p></li>
<li><p><em>Имя</em> Это имя комбайна, предоставленное администратором.</p></li>
<li><p><em>Тип</em> Тип харвестера (например, GeoNetwork, WebDAV и т. д.).</p></li>
<li><p><em>Статус</em> Значок, показывающий текущий статус. См. <a class="reference internal" href="#admin-harvesting-status"><span class="std std-ref">Значки состояния и ошибок сбора урожая</span></a> для различных значков и описаний состояния.</p></li>
<li><p><em>Ошибки</em> Значок, показывающий результат последнего запуска сбора урожая, который мог быть успешным или нет. См. <a class="reference internal" href="#admin-harvesting-status"><span class="std std-ref">Значки состояния и ошибок сбора урожая</span></a> для различных значков и описаний ошибок. При наведении курсора на значок отображается подробная информация о последнем сборе урожая.</p></li>
<li><p><em>Запуск в</em> и <em>Каждый</em>: планирование запусков комбайна. По сути, время дня + сколько часов между повторами и в какие дни будет работать комбайн.</p></li>
<li><p><em>Последний прогон</em> Дата в формате ISO 8601 последнего прогона сбора урожая.</p></li>
<li><p><em>Операция</em> Список кнопок/ссылок на операции на комбайне.</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p>Выбор <em>Редактировать</em> позволит вам изменить параметры комбайна.</p></li>
<li><p>Выбор <em>Клонировать</em> позволит вам создать клон этого комбайна и начать редактировать детали клона.</p></li>
<li><p>Выбор <em>История</em> позволит вам просмотреть/изменить историю сбора урожая для комбайна - см. <a class="reference internal" href="#harvest-history"><span class="std std-ref">История урожая</span></a>.</p></li>
</ul>
</div></blockquote>
<p>Внизу списка комбайнов два ряда кнопок. Первый ряд содержит кнопки, которые могут работать с выбранным набором комбайнов. Вы можете выбрать комбайны, с которыми хотите работать, установив флажок в столбце «Выбрать», а затем нажав одну из этих кнопок. Когда кнопка завершает свое действие, флажки снимаются. Вот значение каждой кнопки:</p>
<ol class="arabic simple">
<li><p><em>Активировать</em> При создании нового комбайна статус <em>неактивен</em>. Используйте эту кнопку, чтобы сделать ее <em>активной</em> и запустить комбайн(ы) в соответствии с расписанием, которое он/они были настроены для использования.</p></li>
<li><p><em>Деактивировать</em> Останавливает комбайн(ы). Примечание: это не означает, что текущая уборка урожая будет остановлена. Вместо этого это означает, что харвестеры больше не будут запускаться по расписанию.</p></li>
<li><p><em>Выполнить</em> Немедленно запустить выбранные комбайны. Это полезно для тестирования настроек харвестера.</p></li>
<li><p><em>Удалить</em> Удалить все выбранные в данный момент комбайны. В диалоговом окне пользователю будет предложено подтвердить действие.</p></li>
</ol>
<p>Второй ряд содержит кнопки общего назначения. Вот значение каждой кнопки:</p>
<ol class="arabic simple">
<li><p><em>Назад</em> Просто возвращает на главную страницу администрирования.</p></li>
<li><p><em>Добавить</em> Эта кнопка создает новый комбайн.</p></li>
<li><p><em>Обновить</em> Обновляет текущий список комбайнов с сервера. Это может быть полезно, чтобы увидеть, не был ли изменен кем-то другой список сбора урожая, или чтобы получить статус любых работающих сборщиков.</p></li>
<li><p><em>История</em> Показать историю уборки всех комбайнов. Подробнее см. <a class="reference internal" href="#harvest-history"><span class="std std-ref">История урожая</span></a>.</p></li>
</ol>
</section>
<section id="harvesting-status-and-error-icons">
<span id="admin-harvesting-status"></span><h2>Значки состояния и ошибок сбора урожая<a class="headerlink" href="#harvesting-status-and-error-icons" title="Permalink to this heading">¶</a></h2>
</section>
<section id="harvesting-result-tips">
<h2>Советы по сбору урожая<a class="headerlink" href="#harvesting-result-tips" title="Permalink to this heading">¶</a></h2>
<p>Когда харвестер запускается и завершает работу, в столбце <strong>Ошибки</strong> для харвестера отображается всплывающая подсказка с подробной информацией о процессе сбора. Если харвестер прошел успешно, то при наведении курсора на подсказку инструмента отобразится таблица с некоторыми строками, помеченными следующим образом:</p>
<ul class="simple">
<li><p><strong>Всего</strong> — это общее количество метаданных, найденных удаленно. Метаданные с одинаковым идентификатором считаются одним.</p></li>
<li><p><strong>Добавлено</strong> — количество метаданных, добавленных в систему, поскольку они отсутствовали локально.</p></li>
<li><p><strong>Удалено</strong> — количество метаданных, которые были удалены локально, поскольку их больше нет на удаленном сервере.</p></li>
<li><p><strong>Обновлено</strong> — количество метаданных, которые присутствуют локально, но которые необходимо обновить, поскольку дата их последнего изменения отличается от удаленной.</p></li>
<li><p><strong>Без изменений</strong> — локальные метаданные остались без изменений. Их удаленная дата последнего изменения не изменилась.</p></li>
<li><p><strong>Неизвестная схема</strong> — количество пропущенных метаданных, поскольку их формат не был распознан GeoNetwork.</p></li>
<li><p><strong>Неизвлекаемые</strong> — количество метаданных, которые были готовы к получению с удаленного сервера, но по какой-то причине в процессе передачи данных возникло исключение.</p></li>
<li><p><strong>Неверный формат</strong> — число пропущенных метаданных, так как они не имеют допустимого XML-представления.</p></li>
<li><p><strong>Не проверяется</strong> — количество метаданных, которые не прошли проверку по своей схеме. Эти метаданные были успешно собраны, но пропущены из-за процесса проверки. Обычно существует возможность принудительной проверки: если вы все равно хотите собрать эти метаданные, просто отключите/оставьте ее выключенной.</p></li>
<li><p><strong>Thumbnails/Thumbnails failed</strong> — количество добавленных миниатюрных изображений метаданных/которые не удалось добавить из-за какой-либо ошибки.</p></li>
<li><p><strong>Используемый атрибут URL-адреса метаданных</strong> — количество слоев/типов объектов/покрытий, у которых есть URL-адрес метаданных, который можно использовать для ссылки на запись метаданных (только OGC Service Harvester).</p></li>
<li><p><strong>Добавленные сервисы</strong> — количество сервисных записей ISO19119, созданных и добавленных в каталог (только для сбора каталога THREDDS).</p></li>
<li><p><strong>Коллекции добавлены</strong> — количество записей наборов данных коллекций, добавленных в каталог (только для сбора каталога THREDDS).</p></li>
<li><p><strong>Добавлено Atomics</strong> — количество записей набора атомарных данных, добавленных в каталог (только для сбора каталога THREDDS).</p></li>
<li><p><strong>Добавлены подшаблоны</strong> — количество подшаблонов (= фрагмент, видимый в каталоге), добавленных в каталог метаданных.</p></li>
<li><p><strong>Подшаблоны удалены</strong> — количество подшаблонов (= фрагмент, видимый в каталоге), удаленных из каталога метаданных.</p></li>
<li><p><strong>Фрагменты с неизвестной схемой</strong> — количество фрагментов с неизвестной схемой метаданных.</p></li>
<li><p><strong>Возвращено фрагментов</strong> — количество фрагментов, возвращенных сборщиком.</p></li>
<li><p><strong>Сопоставленные фрагменты</strong> — количество фрагментов с идентификаторами, которые в шаблоне используются сборщиком.</p></li>
<li><p><strong>Существующие наборы данных</strong> — количество записей метаданных для наборов данных, существовавших на момент запуска сборщика THREDDS.</p></li>
<li><p><strong>Построено записей</strong> - Количество записей, построенных комбайном из шаблона и фрагментов.</p></li>
<li><p><strong>Не удалось вставить</strong> — количество записей, которые сборщик не смог вставить в каталог (обычно из-за того, что запись уже существовала, например, в сборщике Z3950 это может произойти, если одна и та же запись собирается с разных серверов).</p></li>
</ul>
</section>
<section id="adding-new-harvesters">
<h2>Добавление новых комбайнов<a class="headerlink" href="#adding-new-harvesters" title="Permalink to this heading">¶</a></h2>
<p>Кнопка «Добавить» на главной странице позволяет добавлять новые комбайны. Затем отображается раскрывающийся список со всеми доступными протоколами харвестера.</p>
<p>Вы можете выбрать тип сбора урожая, который собираетесь выполнять, и нажать <em>Добавить</em>, чтобы начать процесс добавления комбайна. Поддерживаемые комбайны и сведения о том, что делать дальше, приведены в следующих разделах:</p>
</section>
<section id="harvest-history">
<span id="id2"></span><h2>История урожая<a class="headerlink" href="#harvest-history" title="Permalink to this heading">¶</a></h2>
<p>Каждый раз, когда запускается комбайн, он генерирует отчет о том, что было собрано и/или что пошло не так (например, отчет об исключении). Эти отчеты хранятся в таблице базы данных, используемой GeoNetwork. Всю историю сбора урожая для всех комбайнов можно просмотреть с помощью кнопки «История» на странице «Управление сбором урожая». Историю сбора урожая для отдельного комбайна также можно вызвать, используя ссылку «История» в разделе «Операции для этого комбайна».</p>
<p>После отображения истории урожая можно:</p>
<ul class="simple">
<li><p>расширить детали любых исключений</p></li>
<li><p>сортировать историю по дате сбора урожая (или, в случае истории всех комбайнов, по имени комбайна)</p></li>
<li><p>удалить любую запись истории или всю историю</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../workflow/batchupdate-xsl.html" class="btn btn-neutral float-left" title="Обновление набора записей с помощью XSLT" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="harvesting-geonetwork.html" class="btn btn-neutral float-right" title="Сборщик GeoNetwork 2.0" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2001-2023, GeoNetwork opensource. Licensed under Creative Commons Attribution ShareAlike (Unported) v3.0 License.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>