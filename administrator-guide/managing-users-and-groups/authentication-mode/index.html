
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="GeoNetwork catalogue for listing, searching and reviewing records.">
      
      
      
        <link rel="canonical" href="https://devs-618.github.io/geonetworkby/administrator-guide/managing-users-and-groups/authentication-mode/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../creating-group/">
      
      
      <link rel="icon" href="../../../assets/images/geonetwork-logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Режим аутентификации - GeoNetwork opensource (EN)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://geonetwork-opensource.org/" title="GeoNetwork opensource (EN)" class="md-header__button md-logo" aria-label="GeoNetwork opensource (EN)" data-md-component="logo">
      
  <img src="../../../assets/images/geonetwork-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GeoNetwork opensource (EN)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Режим аутентификации
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../../ru/administrator-guide/managing-users-and-groups/authentication-mode/" hreflang="ru" class="md-select__link">
              Русский
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/geonetwork/core-geonetwork" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    core-geonetwork
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  GeoNetwork

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../help/" class="md-tabs__link">
          
  
    
  
  Help

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../user-guide/" class="md-tabs__link">
          
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Administration

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://geonetwork-opensource.org/" title="GeoNetwork opensource (EN)" class="md-nav__button md-logo" aria-label="GeoNetwork opensource (EN)" data-md-component="logo">
      
  <img src="../../../assets/images/geonetwork-logo.svg" alt="logo">

    </a>
    GeoNetwork opensource (EN)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/geonetwork/core-geonetwork" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    core-geonetwork
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GeoNetwork
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../help/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Help
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../../user-guide/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Administration
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../configuring-the-catalog/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Catalog
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Users and Groups
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Users and Groups
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Режим аутентификации
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Режим аутентификации
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authenticatio-ldap" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка LDAP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройка LDAP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      Настройки авторизации
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройки авторизации">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      Информация о пользователе
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка прав доступа (привелегий)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      Синхронизация
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      Отладка
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-ldap-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка LDAP - Иерархии
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройка LDAP - Иерархии">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ldap-" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка LDAP-бинов (Иерархия)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-cas" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка CAS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-openid" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка OAUTH2 OpenID Connect
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройка OAUTH2 OpenID Connect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      Переменная окружения и ее значение
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Конфигурация сервера Keycloak
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-ad" class="md-nav__link">
    <span class="md-ellipsis">
      Конфигурация Azure AD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Конфигурация Azure AD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      С помощью пользователей и групп
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      Роли приложений
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oidc_bearer_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      OIDC Bearer токены
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OIDC Bearer токены">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      Проверка
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bearer_token_configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      Другие провайдеры
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка Keycloak
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройка Keycloak">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url-geonetwork" class="md-nav__link">
    <span class="md-ellipsis">
      Конфигурация URL-адреса клиента Geonetwork
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      Пример настройки пользователя/роли/группы
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Пример настройки пользователя/роли/группы">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      Пример настройки роли
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      Образец конфигурации группы
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      Пример конфигурации пользователя
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-ecas" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка EU Login
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-shibboleth" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка Shibboleth
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-group/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating group
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating user
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-self-registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Self-Registration
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../managing-classification-systems/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Classification Systems
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../managing-metadata-standards/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Metadata Standards
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#authenticatio-ldap" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка LDAP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройка LDAP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      Настройки авторизации
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройки авторизации">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      Информация о пользователе
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка прав доступа (привелегий)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      Синхронизация
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      Отладка
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-ldap-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка LDAP - Иерархии
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройка LDAP - Иерархии">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ldap-" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка LDAP-бинов (Иерархия)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-cas" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка CAS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-openid" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка OAUTH2 OpenID Connect
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройка OAUTH2 OpenID Connect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      Переменная окружения и ее значение
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Конфигурация сервера Keycloak
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-ad" class="md-nav__link">
    <span class="md-ellipsis">
      Конфигурация Azure AD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Конфигурация Azure AD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      С помощью пользователей и групп
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      Роли приложений
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oidc_bearer_tokens" class="md-nav__link">
    <span class="md-ellipsis">
      OIDC Bearer токены
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OIDC Bearer токены">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      Проверка
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bearer_token_configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      Другие провайдеры
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-keycloak" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка Keycloak
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Настройка Keycloak">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url-geonetwork" class="md-nav__link">
    <span class="md-ellipsis">
      Конфигурация URL-адреса клиента Geonetwork
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      Пример настройки пользователя/роли/группы
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Пример настройки пользователя/роли/группы">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      Пример настройки роли
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      Образец конфигурации группы
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      Пример конфигурации пользователя
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-ecas" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка EU Login
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-shibboleth" class="md-nav__link">
    <span class="md-ellipsis">
      Настройка Shibboleth
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/geonetwork/core-geonetwork/edit/main/docs/manual/docs/en/administrator-guide/managing-users-and-groups/authentication-mode.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/geonetwork/core-geonetwork/raw/main/docs/manual/docs/en/administrator-guide/managing-users-and-groups/authentication-mode.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="_1">Режим аутентификации</h1>
<p>По умолчанию каталог использует внутреннюю базу данных для управления пользователями и аутентификации. 
Однако доступны и другие механизмы аутентификации:</p>
<ul>
<li><a href="./#authenticatio-ldap">Настройка LDAP</a></li>
<li>[Настройка иерархии LDAP] (authentication-mode.md#authentication-ldap-hierarchy)</li>
<li>[Настройка CAS] (authentication-mode.md#authentication-cas)</li>
<li>[Настройка OpenID Connect в OAUTH2] (authentication-mode.md#authentication-openid)</li>
<li>[Настройка Keycloak] (authentication-mode.md#authentication-keycloak)</li>
<li><a href="./#authentication-shibboleth">Настройка Shibboleth</a></li>
</ul>
<p>Какой режим использовать, определяется в <strong><code>WEB-INF/config-security/config-security.xml</code></strong> или с помощью переменной среды <code>geonetwork.security.type</code>.</p>
<p>Раскомментируйте соответствующую строку в <strong><code>WEB-INF/config-security/config-security.xml</code></strong>:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-{mode}.xml&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<h2 id="authenticatio-ldap">Настройка LDAP</h2>
<p><a href="https://en.wikipedia.org/wiki/Ldap">Протокол упрощенного доступа к каталогам (LDAP)</a> 
позволяет GeoNetwork проверять имена пользователей и пароли к удаленному хранилищу идентификационных данных. 
В реализации LDAP используются элементы пользовательского интерфейса для входа в GeoNetwork по умолчанию.</p>
<p>В настоящее время в GeoNetwork есть 2 подхода к настройке LDAP. 
Проверьте также альтернативный подход в разделе <a href="./#authentication-ldap-hierarchy">Настройка иерархии LDAP</a>.</p>
<p>Конфигурация LDAP определена в <code>WEB-INF/config-security/config-security.properties</code>.
Администратор может настроить свою среду, обновив предыдущий файл или переопределив свойства в файле 
<code>WEB-INF/config-security/config-security-overrides.properties</code>.</p>
<ol>
<li>
<p>Определите LDAP-соединение:</p>
<ul>
<li>
<p><code>ldap.base.provider.url</code>: Указывает порталу, где находится сервер LDAP. 
   Убедитесь, что компьютер с каталогом может подключиться к компьютеру с LDAP-сервером. 
   Также убедитесь, что открыты соответствующие порты и т. д.</p>
</li>
<li>
<p><code>ldap.base.dn</code>: обычно это выглядит примерно так: «dc=[organizationnamehere],dc=org».</p>
</li>
<li>
<p><code>ldap.security.principal</code> / <code>ldap.security.credentials</code>: Определите пользователя администратора LDAP, 
   который будет использоваться для привязки к LDAP. Если не определить, то будет произведена анонимная привязка. 
   Principal - это имя пользователя, а credentials - пароль.</p>
</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a># LDAP security properties
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>ldap.base.provider.url=ldap://localhost:389
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>ldap.base.dn=dc=fao,dc=org
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>ldap.security.principal=cn=admin,dc=fao,dc=org
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>ldap.security.credentials=ldap
</span></code></pre></div>
<p>Чтобы убедиться в правильности настроек, попробуйте подключиться к LDAP-серверу с помощью приложения LDAP-браузера.</p>
</li>
<li>
<p>Определите, где искать пользователей в структуре LDAP для аутентификации:</p>
<ul>
<li><code>ldap.base.search.base</code>: это место, где каталог будет искать пользователей для аутентификации.</li>
<li><code>ldap.base.dn.pattern</code>: это отличительное имя пользователя для привязки. <code>{0}</code> заменяется именем пользователя, введенным на экране регистрации.</li>
</ul>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>ldap.base.search.base=ou=people
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>ldap.base.dn.pattern=uid={0},${ldap.base.search.base}
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>#ldap.base.dn.pattern=mail={0},${ldap.base.search.base}
</span></code></pre></div>
</li>
</ol>
<h3 id="_2">Настройки авторизации</h3>
<p>При использовании LDAP информация о пользователе и привилегии для GeoNetwork могут быть определены из атрибутов LDAP.</p>
<h4 id="_3">Информация о пользователе</h4>
<p>Информация о пользователе может быть получена из настройки LDAP для каждого пользовательского атрибута в базе данных каталога, 
которому соответствуют атрибуты LDAP. Если атрибут пуст или не определен, можно задать значение по умолчанию. 
Значение свойства состоит из двух частей, разделенных символом <code>,</code>. Первая часть - это имя атрибута, 
а вторая часть - значение по умолчанию на случай, если имя атрибута не определено или значение атрибута в LDAP пустое.</p>
<p>Конфигурация следующая:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a># Map user information to LDAP attributes and default values
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a># ldapUserContextMapper.mapping[name]=ldap_attribute,default_value
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>ldapUserContextMapper.mapping[name]=cn,
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>ldapUserContextMapper.mapping[surname]=givenName,
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>ldapUserContextMapper.mapping[mail]=mail,data@myorganization.org
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>ldapUserContextMapper.mapping[organisation]=,myorganization
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>ldapUserContextMapper.mapping[kind]=,
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>ldapUserContextMapper.mapping[address]=,
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>ldapUserContextMapper.mapping[zip]=,
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>ldapUserContextMapper.mapping[state]=,
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>ldapUserContextMapper.mapping[city]=,
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>ldapUserContextMapper.mapping[country]=,
</span></code></pre></div>
<h4 id="_4">Настройка прав доступа (привелегий)</h4>
<p>Группы пользователей и роли пользователей могут быть установлены как на основе информации LDAP, так и без нее. 
По умолчанию управление привилегиями пользователей осуществляется из локальной базы данных. 
Если для определения привилегий пользователя необходимо использовать информацию LDAP, 
установите для свойства <code>ldap.privilege.import</code> значение "true":</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ldap.privilege.import=true
</span></code></pre></div>
<p>При импорте привилегий из LDAP администратор каталога может принять решение о создании групп, 
определенных в LDAP и не определенных в локальной базе данных. Для этого установите значение true для следующего свойства:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ldap.privilege.create.nonexisting.groups=false
</span></code></pre></div>
<p>Чтобы определить, к каким группам принадлежит пользователь и какой профиль является его профилем:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>ldapUserContextMapper.mapping[privilege]=groups,sample
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a># If not set, the default profile is RegisteredUser
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a># Valid profiles are ADMINISTRATOR, USER_ADMIN, REVIEWER, EDITOR, REGISTERED_USER, GUEST
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>ldapUserContextMapper.mapping[profile]=privileges,RegisteredUser
</span></code></pre></div>
<p>Настройка атрибутов:</p>
<ul>
<li>атрибут <code>privilege</code> содержит группу, членом которой является данный пользователь. Допускается использование более чем одной группы.</li>
<li>атрибут <code>profile</code> содержит профиль пользователя.</li>
</ul>
<p>Допустимыми ролями пользователя являются:</p>
<ul>
<li>Администратор</li>
<li>Пользователь-администратор (группы)</li>
<li>Рецензент</li>
<li>Редактор</li>
<li>Зарегистрированный пользователь</li>
<li>Гость</li>
</ul>
<p>Если атрибут LDAP, содержащий профили, не соответствует списку профилей в каталоге, может быть определено сопоставление:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a># Map LDAP custom profiles to catalog profiles. Not used if ldap.privilege.pattern is defined.
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>ldapUserContextMapper.profileMapping[Admin]=Administrator
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>ldapUserContextMapper.profileMapping[Editor]=Reviewer
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>ldapUserContextMapper.profileMapping[Public]=RegisteredUser
</span></code></pre></div>
<p>Например, в предыдущей конфигурации значение атрибута <code>Admin</code> будет сопоставлено с <code>Administrator</code> (это действительный профиль для каталога).</p>
<p>Атрибут может определять как профиль, так и группу пользователя. Чтобы извлечь эту информацию, 
можно определить пользовательский шаблон для заполнения привилегий пользователя в соответствии с этим атрибутом:</p>
<ol>
<li>
<p>Определите один атрибут для профиля и один для групп в файле <code>WEB-INF/config-security/config-security-overrides.properties</code>.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># In config-security-overrides.properties
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>ldapUserContextMapper.mapping[privilege]=cat_privileges,sample
</span></code></pre></div>
</li>
<li>
<p>Определите один атрибут для привилегии и задайте пользовательский шаблон:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a># In config-security.properties
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>ldap.privilege.pattern=CAT_(.*)_(.*)
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>ldap.privilege.pattern.idx.group=1
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>ldap.privilege.pattern.idx.profil=2
</span></code></pre></div>
<p>Включите <code>er</code> для <code>LDAPUserDetailsContextMapperWithPattern</code> (в <code>WEB-INF/config-security/config-security-ldap.xml</code>).</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="cm">&lt;!--&lt;bean id=&quot;ldapUserContextMapper&quot;</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="cm">    class=&quot;org.fao.geonet.kernel.security.ldap.LDAPUserDetailsContextMapper&quot;&gt;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="cm">    &lt;property name=&quot;mapping&quot;&gt;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="cm">      &lt;map/&gt;</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="cm">    &lt;/property&gt;</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="cm">    &lt;property name=&quot;profileMapping&quot;&gt;</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="cm">      &lt;map/&gt;</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="cm">    &lt;/property&gt;</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="cm">    &lt;property name=&quot;ldapBaseDn&quot; value=&quot;${ldap.base.dn}&quot;/&gt;</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="cm">    &lt;property name=&quot;importPrivilegesFromLdap&quot; value=&quot;${ldap.privilege.import}&quot;/&gt;</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="cm">    &lt;property name=&quot;createNonExistingLdapGroup&quot;</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="cm">              value=&quot;${ldap.privilege.create.nonexisting.groups}&quot;/&gt;</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="cm">    &lt;property name=&quot;createNonExistingLdapUser&quot; value=&quot;${ldap.privilege.create.nonexisting.users}&quot;/&gt;</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="cm">    &lt;property name=&quot;ldapManager&quot; ref=&quot;ldapUserDetailsService&quot;/&gt;</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="cm">    &lt;property name=&quot;contextSource&quot; ref=&quot;contextSource&quot;/&gt;</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="cm">    &lt;property name=&quot;ldapUsernameCaseInsensitive&quot; value=&quot;${ldap.usernameCaseInsensitive:#{true}}&quot;/&gt;</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="cm">&lt;/bean&gt;--&gt;</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserContextMapper&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.fao.geonet.kernel.security.ldap.LDAPUserDetailsContextMapperWithPattern&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mapping&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">      </span><span class="nt">&lt;map/&gt;</span>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">  </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileMapping&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">      </span><span class="nt">&lt;map/&gt;</span>
</span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">  </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;importPrivilegesFromLdap&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.import}&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;createNonExistingLdapGroup&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.create.nonexisting.groups}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;createNonExistingLdapUser&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.create.nonexisting.users}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapManager&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;ldapUserDetailsService&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a>
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;privilegePattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.pattern}&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groupIndexInPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.pattern.idx.group}&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profilIndexInPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;${ldap.privilege.pattern.idx.profil}&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-10-35"><a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a>
</span><span id="__span-10-36"><a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a><span class="w">  </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;contextSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;contextSource&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-10-37"><a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Определите пользовательское место для извлечения группы и роли (нет поддержки комбинации группа/роль) 
    (используйте LDAPUserDetailsContextMapperWithProfileSearch в <strong><code>config-security.xml</code></strong>).</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ldap.privilege.search.group.attribute=cn
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>ldap.privilege.search.group.object=ou=groups
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>#ldap.privilege.search.group.query=(&amp;(objectClass=*)(memberUid=uid={0},${ldap.base.search.base},${ldap.base.dn})(cn=EL_*))
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>ldap.privilege.search.group.queryprop=memberuid
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>ldap.privilege.search.group.query=(&amp;(objectClass=*)(memberUid=uid={0},${ldap.base.search.base},${ldap.base.dn})(|(cn=SP_*)(cn=EL_*)))
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>ldap.privilege.search.group.pattern=EL_(.*)
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>ldap.privilege.search.privilege.attribute=cn
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>ldap.privilege.search.privilege.object=ou=groups
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>ldap.privilege.search.privilege.query=(&amp;(objectClass=*)(memberUid=uid={0},${ldap.base.search.base},${ldap.base.dn})(cn=SV_*))
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>ldap.privilege.search.privilege.pattern=SV_(.*)
</span></code></pre></div>
<p>Атрибут LDAP может содержать следующую конфигурацию для определения различных типов пользователей, например:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>cat_privileges=CAT_ALL_Administrator
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>-- Define a reviewer for the group GRANULAT
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>cat_privileges=CAT_GRANULAT_Reviewer
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>-- Define a reviewer for the group GRANULAT and editor for MIMEL
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>cat_privileges=CAT_GRANULAT_Reviewer
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>cat_privileges=CAT_MIMEL_Editor
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>-- Define a reviewer for the group GRANULAT and editor for MIMEL and RegisteredUser for NATURA2000
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>cat_privileges=CAT_GRANULAT_Reviewer
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>cat_privileges=CAT_MIMEL_Reviewer
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>cat_privileges=CAT_NATURA2000_RegisteredUser
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>-- Only a registered user for GRANULAT
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>cat_privileges=CAT_GRANULAT_RegisteredUser
</span></code></pre></div>
</li>
</ol>
<h4 id="_5">Синхронизация</h4>
<p>Задача синхронизации заключается в удалении пользователей LDAP, которые могут быть удалены. Например:</p>
<ul>
<li>T0: Пользователь A входит в каталог. В базе данных пользователей создается локальный пользователь A.</li>
<li>T1: Пользователь A удаляется из LDAP (пользователь A больше не может войти в каталог).</li>
<li>T2: Задача синхронизации проверит, все ли локальные пользователи LDAP существуют в LDAP:<ul>
<li>Если пользователь не владеет никакими записями, он будет удален.</li>
<li>Если пользователь владеет записями метаданных, в систему регистрации каталога будет записано предупреждение. 
  Владелец записи должен быть изменен на другого пользователя, прежде чем задача сможет удалить текущего владельца.</li>
</ul>
</li>
</ul>
<p>По умолчанию задача запускается один раз в день. Это можно изменить в следующем свойстве:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a># Run LDAP sync every day at 23:30
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>ldap.sync.cron=0 30 23 * * ?
</span></code></pre></div>
<p>Следующие свойства позволяют дополнительно настроить процесс синхронизации:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>ldap.sync.user.search.base=${ldap.base.search.base}
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>ldap.sync.user.search.filter=(&amp;(objectClass=*)(mail=*@*)(givenName=*))
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>ldap.sync.user.search.attribute=uid
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>ldap.sync.group.search.base=ou=groups
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>ldap.sync.group.search.filter=(&amp;(objectClass=posixGroup)(cn=EL_*))
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>ldap.sync.group.search.attribute=cn
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>ldap.sync.group.search.pattern=EL_(.*)
</span></code></pre></div>
<h4 id="_6">Отладка</h4>
<p>В случае сбоя подключения попробуйте увеличить уровень ведения журнала для LDAP в <code>WEB-INF/classes/log4j.xml</code>:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">&lt;logger</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;geonetwork.ldap&quot;</span><span class="w"> </span><span class="na">additivity=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="nt">&lt;level</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;DEBUG&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nt">&lt;/logger&gt;</span>
</span></code></pre></div>
<p>Или в настройках конфигурации временно установите <code>Уровень логирования</code> на <code>DEV</code>:</p>
<p><img alt="" src="../img/setting-log-level.png" /></p>
<h2 id="authentication-ldap-hierarchy">Настройка LDAP - Иерархии</h2>
<p>В середине 2020 года был введен несколько иной метод настройки LDAP.</p>
<p>Это расширяет инфраструктуру исходной конфигурации (исходные конфигурации по-прежнему работают без каких-либо изменений).</p>
<p>Прежде чем приступить к настройке, вам необходимо знать;</p>
<ol>
<li>URL-адрес вашего сервера LDAP</li>
<li>Имя пользователя/пароль для входа на сервер LDAP (для выполнения запросов)</li>
<li>Запрос LDAP для поиска пользователя (с учетом того, что он вводит на экране входа в систему)</li>
<li>Подробные сведения о том, как преобразовать атрибуты пользователя LDAP в атрибуты пользователя GeoNetwork</li>
<li>Запрос LDAP для поиска групп, членом которых является пользователь</li>
<li>Как преобразовать группу LDAP в группу/роль GeoNetwork </li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Существует [видеочат разработчика] (https://www.youtube.com/watch?v=f8rvbEdnE-g), 
в котором подробно рассказывается о том, как настроить LDAP, включая настройку предварительно настроенного сервера LDAP 
(с использованием Apache Directory Studio) для тестирования/отладки/обучения.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Следует ли мне использовать иерархию или исходную конфигурацию?</p>
<p>Если уже есть существующая (исходная) конфигурация, нет необходимости переходить на новую. 
Большая часть кода в обоих вариантах одинакова.</p>
<p>Если вы запускаете новую конфигурацию, я бы рекомендовал использовать иерархическую конфигурацию. 
Это немного проще и поддерживается тестовыми примерами и инфраструктурой тестирования. 
Также поддерживается протокол Ldap, в котором пользователи/ группы находятся в нескольких каталогах.</p>
</div>
<h3 id="ldap-">Настройка LDAP-бинов (Иерархия)</h3>
<p>GeoNetwork поставляется с образцом конфигурации LDAP, 
который можно использовать в Apache Directory Studio для создания того же сервера LDAP, который использовался в тестовых примерах. 
Существует также пример конфигурации GeoNetwork, которая подключается к этому серверу LDAP. 
Пожалуйста, ознакомьтесь с инструкциями в разделе <code class="interpreted-text" role="repo">core-geonetwork/blob/master/core/src/test/resources/org/fao/geonet/kernel/security/ldap/README.md</code> 
или в <a href="https://www.youtube.com/watch?v=f8rvbEdnE-g">видео разработчика</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Чтобы использовать эту конфигурацию, откомментируйте строку «<import resource=»config-security-ldap-recursive.xml«/>» 
в файле <code>web/src/main/webapp/WEB-INF/config-security/config-security.xml</code>.</p>
</div>
<ol>
<li>
<p>Сконфигурируйте <code>ce</code> бин со ссылкой на LDAP-сервер и пользователем, который может выполнять LDAP-запросы.</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;contextSource&quot;</span><span class="w">   </span><span class="na">class=</span><span class="s">&quot;org.springframework.security.ldap.DefaultSpringSecurityContextSource&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">value=</span><span class="s">“ldap://localhost:3333/dc=example,dc=com&quot;/</span><span class="nt">&gt;</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;userDn&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;cn=admin,ou=GIS Department,ou=Corporate Users,dc=example,dc=com&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;password&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;admin1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Сконфигурируйте <code>ce</code> бин со ссылкой на LDAP-сервер и пользователем, который может выполнять LDAP-запросы.</p>
<p>Примечание: Установите <code>ee</code> в <code>ue</code>, чтобы выполнить рекурсивный поиск в LDAP. 
Используйте <code>se</code>, чтобы контролировать, в какой директории начинается поиск («» означает начинать с корня).</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserSearch&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;…&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">   </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;searchBase&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">   </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;searchFilter&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(sAMAccountName={0})&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">   </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;contextSource&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;contextSource&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">   </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;searchSubtree&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Настройте <code>er</code> бин для преобразования атрибутов пользователя LDAP в атрибуты пользователя GeoNetwork (см. исходную документацию по настройке, выше).</p>
<p>ПРИМЕЧАНИЕ: Часть <code>ue</code> состоит из двух частей. Первая часть - это имя атрибута LDAP (может быть пустым). 
Вторая часть - значение по умолчанию, если атрибут LDAP отсутствует или пуст (см. исходную документацию по конфигурации, выше).</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserContextMapper&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">“LDAPUserDetailsContextMapperWithProfileSearchEnhanced&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mapping&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">      </span><span class="nt">&lt;map&gt;</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;cn,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;surname&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;sn,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;mail&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;mail,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;organisation&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;address&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;zip&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-11"><a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;state&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-12"><a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;city&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-13"><a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;country&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-14"><a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
</span><span id="__span-18-15"><a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;profile&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,RegisteredUser&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-16"><a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;privilege&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;,none&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-18-17"><a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a><span class="w">      </span><span class="nt">&lt;/map&gt;</span>
</span><span id="__span-18-18"><a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a><span class="w">    </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-18-19"><a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>
</span><span id="__span-18-20"><a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Продолжайте настройку <code>er</code> бина, чтобы LDAP мог также предоставлять групповые/профильные роли для пользователя.</p>
<p>ПРИМЕЧАНИЕ: <code>ry</code> - это каталог LDAP, с которого будет начинаться запрос членства («» означает начало с корня LDAP).</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserContextMapper&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;LDAPUserDetailsContextMapperWithProfileSearchEnhanced&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;importPrivilegesFromLdap&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">“true&quot;/</span><span class="nt">&gt;</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="cm">&lt;!-- typically, don&#39;t want GN to modify the LDAP server! --&gt;</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;createNonExistingLdapGroup&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;createNonExistingLdapUser&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;false&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapManager&quot;</span><span class="w"> </span><span class="na">ref=</span><span class="s">&quot;ldapUserDetailsService&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;membershipSearchStartObject&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapMembershipQuery&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;(&amp;amp;(objectClass=*)(member=cn={2})(cn=GCAT_*))&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>
</span><span id="__span-19-13"><a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Продолжайте настройку <code>er</code> бина, чтобы роли LDAP можно было преобразовать в группы/профили GeoNetwork.</p>
<p>ПРИМЕЧАНИЕ: Вы можете использовать несколько <code>rs</code>.</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapUserContextMapper&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;LDAPUserDetailsContextMapperWithProfileSearchEnhanced&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w">   </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapRoleConverters&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="w">     </span><span class="nt">&lt;util:list&gt;</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">       </span><span class="nt">&lt;ref</span><span class="w"> </span><span class="na">bean=</span><span class="s">&quot;ldapRoleConverterGroupNameParser&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">     </span><span class="nt">&lt;/util:list&gt;</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">   </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
</ol>
<p>В настоящее время существует два способа преобразования группы LDAP в группы/профайлы GeoNetwork.</p>
<ul>
<li>
<p>Способ <code>er</code>, который работает так же, как и оригинальная конфигурация LDAP. 
  Он использует регулярное выражение для разбора имени группы LDAP в группу/профиль GeoNetwork. 
  Это преобразует роль LDAP <code>OR</code> в группу GeoNetwork <code>AL</code> с профилем <code>r</code>.</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">&quot;ldapRoleConverterGroupNameParser&quot;</span><span class="w">  </span><span class="na">class=</span><span class="s">&quot;LDAPRoleConverterGroupNameParser&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ldapMembershipQueryParser&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;GCAT_(.*)_(.*)&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groupIndexInPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileIndexInPattern&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">“2&quot;/</span><span class="nt">&gt;</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileMapping&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="w">      </span><span class="nt">&lt;map&gt;</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;ADMIN&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Administrator&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">        </span><span class="nt">&lt;entry</span><span class="w"> </span><span class="na">key=</span><span class="s">&quot;EDITOR&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Editor&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">      </span><span class="nt">&lt;/map&gt;</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">    </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
<li>
<p>Существует также более прямой способ с использованием <code>er</code>. Это напрямую преобразует имя группы LDAP в список групп/профилей GeoNetwork.</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">id=</span><span class="s">“ldapRoleConverterGroupNameParser&quot;</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;LDAPRoleConverterGroupNameConverter&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="nt">&lt;property</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;convertMap&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">      </span><span class="nt">&lt;map&gt;</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">        </span><span class="nt">&lt;entry&gt;</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">            </span><span class="nt">&lt;key&gt;</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>HGIS_GeoNetwork_Admin<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">            </span><span class="nt">&lt;/key&gt;</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">            </span><span class="nt">&lt;list&gt;</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">                </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.fao.geonet.kernel.security.ldap.LDAPRole&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">                  </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groupName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;myGroup&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">                  </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Administrator&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">                </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">            </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">        </span><span class="nt">&lt;/entry&gt;</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">        </span><span class="nt">&lt;entry&gt;</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="w">          </span><span class="nt">&lt;key&gt;</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="w">                </span><span class="nt">&lt;value&gt;</span>HGIS_GeoNetwork_Editor<span class="nt">&lt;/value&gt;</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="w">          </span><span class="nt">&lt;/key&gt;</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="w">          </span><span class="nt">&lt;list&gt;</span>
</span><span id="__span-22-24"><a id="__codelineno-22-24" name="__codelineno-22-24" href="#__codelineno-22-24"></a>
</span><span id="__span-22-25"><a id="__codelineno-22-25" name="__codelineno-22-25" href="#__codelineno-22-25"></a><span class="w">            </span><span class="nt">&lt;bean</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;org.fao.geonet.kernel.security.ldap.LDAPRole&quot;</span><span class="nt">&gt;</span>
</span><span id="__span-22-26"><a id="__codelineno-22-26" name="__codelineno-22-26" href="#__codelineno-22-26"></a><span class="w">              </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;groupName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">“myGroup&quot;/</span><span class="nt">&gt;</span>
</span><span id="__span-22-27"><a id="__codelineno-22-27" name="__codelineno-22-27" href="#__codelineno-22-27"></a><span class="w">              </span><span class="nt">&lt;constructor-arg</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;profileName&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;Editor&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-22-28"><a id="__codelineno-22-28" name="__codelineno-22-28" href="#__codelineno-22-28"></a><span class="w">            </span><span class="nt">&lt;/bean&gt;</span>
</span><span id="__span-22-29"><a id="__codelineno-22-29" name="__codelineno-22-29" href="#__codelineno-22-29"></a>
</span><span id="__span-22-30"><a id="__codelineno-22-30" name="__codelineno-22-30" href="#__codelineno-22-30"></a><span class="w">          </span><span class="nt">&lt;/list&gt;</span>
</span><span id="__span-22-31"><a id="__codelineno-22-31" name="__codelineno-22-31" href="#__codelineno-22-31"></a><span class="w">        </span><span class="nt">&lt;/entry&gt;</span>
</span><span id="__span-22-32"><a id="__codelineno-22-32" name="__codelineno-22-32" href="#__codelineno-22-32"></a><span class="w">      </span><span class="nt">&lt;/map&gt;</span>
</span><span id="__span-22-33"><a id="__codelineno-22-33" name="__codelineno-22-33" href="#__codelineno-22-33"></a><span class="w">    </span><span class="nt">&lt;/property&gt;</span>
</span><span id="__span-22-34"><a id="__codelineno-22-34" name="__codelineno-22-34" href="#__codelineno-22-34"></a><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></div>
</li>
</ul>
<h2 id="authentication-cas">Настройка CAS</h2>
<p>Чтобы включить CAS, настройте аутентификацию, включив <code>WEB-INF/config-security/config-security-cas.xml</code> в <code>WEB-INF/config-security/config-security.xml</code>, 
откомментировав следующие строки:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-cas.xml&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-cas-ldap.xml&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<p>Для управления пользователями CAS может использовать либо LDAP, либо базу данных. 
Чтобы использовать базу данных, откомментируйте следующие строки:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-cas.xml&quot;</span><span class="nt">/&gt;</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-cas-database.xml&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<p>Конфигурация CAS определена в файле <code>WEB-INF/config-security/config-security.properties</code>. 
Можно настроить свое окружение, обновив предыдущий файл или определив переопределения свойств в файле <code>WEB-INF/config-security/config-security-overrides.properties</code>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>cas.baseURL=https://localhost:8443/cas
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>cas.ticket.validator.url=${cas.baseURL}
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>cas.login.url=${cas.baseURL}/login
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>cas.logout.url=${cas.baseURL}/logout?url=${geonetwork.https.url}/
</span></code></pre></div>
<h2 id="authentication-openid">Настройка OAUTH2 OpenID Connect</h2>
<p><a href="https://openid.net/connect/">OAUTH2 OpenID_Connect</a> - это система аутентификации и авторизации, основанная на OAUTH2. 
Плагин OpenID Connect от Geonetwork был протестирован с <a href="https://keycloak.org">Keycloak</a> 
и <a href="https://azure.microsoft.com/en-ca/services/active-directory/">Azure AD</a>, но должен работать с любым провайдером.</p>
<p>Основные шаги по настройке:</p>
<ol>
<li>Настройте IDP-сервер (например, Keycloak или Azure AD).<ol>
<li>Убедитесь, что ID-токен предоставляет информацию о роли/группе.</li>
<li>Авторизуйте URL-адреса Geonetwork для перенаправления (например, <code>http://localhost:8080/geonetwork/login/oauth2/code/geonetwork-oicd</code>).</li>
<li>Запишите идентификатор клиента</li>
<li>Запишите секрет клиента</li>
<li>Получение документа метаданных JSON сервера</li>
</ol>
</li>
<li>Настройка Geonetwork с помощью переменных окружения<ol>
<li><code>GEONETWORK_SECURITY_TYPE=openidconnect</code>.</li>
<li><code>OPENIDCONNECT_CLIENTSECRET=\...</code> (с вашего IDP сервера)</li>
<li><code>OPENIDCONNECT_CLIENTID=\...</code> (с вашего IDP-сервера)</li>
<li><code>OPENIDCONNECT_SERVERMETADATA_JSON_TEXT='\...'</code> (текст JSON-документа метаданных вашего сервера)</li>
<li><code>OPENIDCONNECT_IDTOKENROLELOCATION=\...</code> (расположение ролей пользователя в ID-токене)</li>
</ol>
</li>
</ol>
<p>Плагин Open ID Connect от Geonetwork имеет множество настроек - смотрите файлы <code>WEB-INF/config-security/config-security-openidconnect.xml</code> 
и <code>WEB-INF/config-security/config-security-openidconnect-overrides.properties</code>.</p>
<h3 id="_7">Переменная окружения и ее значение</h3>
<p><strong>GEONETWORK_SECURITY_TYPE</strong>.</p>
<p>Должно быть <code>ct</code>.</p>
<p><strong>OPENIDCONNECT_CLIENTID</strong></p>
<p>Имя клиента/приложения, настроенного на сервере OpenID.</p>
<p><strong>OPENIDCONNECT_CLIENTSECRET</strong>.</p>
<p>Секрет <code>et</code>, который вы настроили на сервере OpenID.</p>
<p><strong>OPENIDCONNECT_SERVERMETADATA_CONFIG_URL</strong>.</p>
<p>URL-адрес JSON-документа метаданных внешнего сервера OIDC. Обычно он находится по адресу <code>/.well-known/openid-configuration</code> на сервере IDP.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Это будет загружать конфигурацию сервера при каждом запуске GeoNetwork, 
что может быть связано с проблемой безопасности. Для безопасности используйте <code>ps</code> URL.</p>
</div>
<p><strong>OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</strong>.</p>
<p>Должен быть текстом конфигурации метаданных вашего сервера OpenID (JSON).</p>
<p><strong>OPENIDCONNECT_SERVERMETADATA_FNAME</strong>.</p>
<p>Вместо того чтобы помещать конфигурацию метаданных сервера OpenID в виде текста в переменную (<code>OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</code>), 
следует поместить содержимое JSON в файл и сослаться на него с помощью этой переменной (например, <code>/WEB-INF/config-security/openid-configuration.json</code>)</p>
<p><strong>OPENIDCONNECT_IDTOKENROLELOCATION</strong>.</p>
<p>Где в ID-токене хранятся роли/группы пользователей (т.е. «groups», «roles» или «resource_access.gn-key.roles»)</p>
<p><strong>OPENIDCONNECT_ROLECONVERTER</strong></p>
<p>Обеспечивает простое преобразование ролей с сервера OpenID в роли Geonetwork.</p>
<p>Т.е. <code>GeonetworkAdmin=Administrator,GeonetworkEditor=Editor</code>.</p>
<p>Это преобразует «GeonetworkAdmin» (с сервера OpenID) в роль Geonetwork «Administrator».</p>
<div class="admonition обратите внимание">
<p class="admonition-title">Обратите</p>
<p>Как и в плагине keycloak, вы можете использовать имена ролей/групп вида «group:role» для назначения пользователя группе Geonetwork и уровню прав.</p>
</div>
<p><strong>OPENIDCONNECT_MINIMUMPROFILE</strong>.</p>
<p>Каждому пользователю, который аутентифицируется на сервере OpenID, будет присвоена эта роль.</p>
<p>По умолчанию это <code>RegisteredUser</code>.</p>
<p><strong>OPENIDCONNECT_USERPROFILEUPDATEENABLED</strong>.</p>
<p>Когда пользователь входит в систему, обновлять его профиль Geotwork на основе ID-токена сервера OpenID.</p>
<p>По умолчанию <code>«true»</code>.</p>
<p><strong>OPENIDCONNECT_USERGROUPUPDATEENABLED</strong>.</p>
<p>При входе пользователя в систему обновлять его разрешения на группы/роли в Geotwork.</p>
<p>По умолчанию <code>«true»</code>.</p>
<p><strong>OPENIDCONNECT_SCOPES</strong>.</p>
<p>Ограничение запрашиваемого диапазона доступа к серверу OpenID.</p>
<p>По умолчанию «openid email profile» и «openid email profile offline_access» (для токенов на предъявителя).</p>
<p><strong>OPENIDCONNECT_LOGINTYPE</strong>.</p>
<p>Как Geonetwork будет работать с пользователями, которые не вошли в систему.</p>
<p>По умолчанию «LINK» - пользователи могут нажать на ссылку «login» на главной странице.</p>
<p>«AUTOLOGIN» - не предусмотрена форма входа, которая будет автоматически вводить пользователя в систему, когда это возможно.</p>
<p><strong>OPENIDCONNECT_LOGSENSITIVE_INFO</strong>.</p>
<p>«true» или „false“ (по умолчанию)</p>
<p>Журналы: CODE, ACCESS TOKEN, ID TOKEN, результат userinfo конечной точки и вычисленные полномочия GeoNetwork.</p>
<p>ЗАПИСЬ ЭТОЙ ИНФОРМАЦИИ В ЖУРНАЛ, ВЕРОЯТНО, ПРЕДСТАВЛЯЕТ СОБОЙ РИСК ДЛЯ БЕЗОПАСНОСТИ И ЛИЧНОЙ ИНФОРМАЦИИ. 
НЕ ВКЛЮЧАЙТЕ ЭТУ ФУНКЦИЮ В СИСТЕМЕ, КОТОРАЯ ДЕЙСТВИТЕЛЬНО ИСПОЛЬЗУЕТСЯ.</p>
<p>Следует избегать регистрировать очень чувствительную информацию, а также полный токен доступа или id (только часть требований). 
Следует регистрировать одноразовый CODE, но он уже должен быть деактивирован сервером до того, как пользователь его зарегистрирует.</p>
<p>Токен доступа, userinfo и id-токен содержат конфиденциальную информацию (например, реальные имена, адреса электронной почты, etc...).</p>
<h3 id="keycloak">Конфигурация сервера Keycloak</h3>
<p>Полное описание шагов по настройке keycloak выходит за рамки этого документа, но это должно послужить руководством.</p>
<p>Здесь описана настройка keycloak на основе <strong>другого OpenID IDP</strong> (например, Azure AD). В keycloak:</p>
<ol>
<li>Создайте царство (например, <code>lm</code>).</li>
<li>Создайте openid-клиента (например, <code>nt</code>). Это ваш ClientID.<ol>
<li>Корневой URL: <code>http://localhost:7777/geonetwork</code> (это корневой URL GN).</li>
<li>Допустимые URI перенаправления: <code>http://localhost:7777/geonetwork/*</code>.</li>
<li>Тип доступа: Конфиденциальный .</li>
<li>На вкладке <code>ls</code> получите секрет (это ваш клиентский секретный ключ)</li>
<li>На вкладке <code>es</code> создайте несколько ролей: Администратор, Редактор, Рецензент, Зарегистрированный гость</li>
</ol>
</li>
</ol>
<p>Нужно иметь идентификатор клиента Keycloak («myclient») и секретный ключ клиента. 
Конфигурационный JSON доступен по адресу <code>https://YOUR_KEYCLOAK_HOST/realms/{YOUR REALM NAME}/.well-known/openid-configuration</code></p>
<p>Переменные окружения будут выглядеть следующим образом:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="na">GEONETWORK_SECURITY_TYPE</span><span class="o">=</span><span class="s">openidconnect</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="na">OPENIDCONNECT_CLIENTSECRET</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="na">OPENIDCONNECT_CLIENTID</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="na">OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</span><span class="o">=</span><span class="s">&#39;...big json text...&#39;</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="na">OPENIDCONNECT_IDTOKENROLELOCATION</span><span class="o">=</span><span class="s">&#39;resource_access.{your client id}.roles&#39;</span>
</span></code></pre></div>
<h3 id="azure-ad">Конфигурация Azure AD</h3>
<p>Существует два способа настройки Azure AD. Первый - с помощью пользователей и групп (более традиционный метод LDAP) или с помощью ролей приложений.</p>
<h4 id="_8">С помощью пользователей и групп</h4>
<p>Настройте приложение Azure:</p>
<ol>
<li>Создайте новое <code>on</code>.</li>
<li>Используйте <code>http://localhost:8080/geonetwork/login/oauth2/code/geonetwork-oicd</code> в качестве URI перенаправления</li>
<li>В разделе «Сертификаты и секреты» добавьте новый секрет и запишите его (убедитесь, что вы получаете значение секрета, а не идентификатор объекта).</li>
<li>Убедитесь, что группы находятся в ID-токене - на вкладке «Manifest» отредактируйте JSON так, чтобы «groupMembershipClaims»: «SecurityGroup».</li>
<li>На странице сводки получите идентификатор приложения (клиента)</li>
<li>На странице сводки выберите «Конечные точки» (вверху) и получите текст JSON из документа «OpenID Connect metadata document» Endpoints.</li>
</ol>
<p>Настройте пользователей и группы:</p>
<ol>
<li>В Azure AD перейдите в раздел «Группы</li>
<li>Добавьте новые группы - «geonetworkAdmin», «geonetworkReviewer» и т. д.... Запишите название и <strong>Object ID</strong> группы.</li>
<li>Отредактируйте пользователя, выберите «Группы» и добавьте его в соответствующую группу.</li>
</ol>
<p>Переменные окружения будут выглядеть следующим образом:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="na">GEONETWORK_SECURITY_TYPE</span><span class="o">=</span><span class="s">openidconnect</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="na">OPENIDCONNECT_CLIENTSECRET</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="na">OPENIDCONNECT_CLIENTID</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="na">OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</span><span class="o">=</span><span class="s">&#39;...big json text...&#39;</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="na">OPENIDCONNECT_IDTOKENROLELOCATION</span><span class="o">=</span><span class="s">&#39;groups&#39;</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="na">OPENIDCONNECT_ROLECONVERTER</span><span class="o">=</span><span class="s">&#39;3a94275f-7d53-4205-8d78-11f39e9ffa5a=Administrator,d93c6444-feee-4b67-8c0f-15d6796370cb=Reviewer&#39;</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="language-text highlight"><pre><span></span><code>Роли находятся в части «roles» ID-токена.
</code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OPENIDCONNECT_ROLECONVERTER преобразует идентификатор объекта группы Azure AD в роль Geonetwork Role.</p>
</div>
<h4 id="_9">Роли приложений</h4>
<p>Настройте приложение Azure:</p>
<ol>
<li>Создайте новое приложение Enterprise</li>
<li>Используйте <code>http://localhost:8080/geonetwork/login/oauth2/code/geonetwork-oicd</code> в качестве URI перенаправления</li>
<li>В разделе «Сертификаты и секреты» добавьте новый секрет и запишите его (убедитесь, что вы получаете значение секрета, а не идентификатор объекта).</li>
<li>Убедитесь, что группы находятся в ID-токене - на вкладке «Manifest» отредактируйте JSON так, чтобы «groupMembershipClaims»: «ApplicationGroup».</li>
<li>На странице сводки получите идентификатор приложения (клиента)</li>
<li>На странице сводки выберите «Конечные точки» (вверху) и получите текст JSON из документа «OpenID Connect metadata document» Endpoints</li>
</ol>
<p>Настройте роли приложения:</p>
<ol>
<li>В созданном вами приложении перейдите в раздел «Роли приложения».</li>
<li>Добавьте новые группы - «Редактор», «Рецензент» и т.д....</li>
</ol>
<p>Назначьте пользователей:</p>
<ol>
<li>Перейдите в Azure AD, Enterprise Application, затем в созданное вами приложение.</li>
<li>Выберите «Назначить пользователей и группы».</li>
<li>Нажмите кнопку «Добавить пользователя/группу» (вверху).</li>
<li>Нажмите «Нет выбранных» (в разделе «Пользователи») и выберите несколько пользователей</li>
<li>Нажмите «Не выбрано» (в разделе «Выбрать роль») и выберите несколько ролей.</li>
<li>Настройте всех пользователей с ролями</li>
</ol>
<p>Ваши переменные окружения будут выглядеть следующим образом:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="na">GEONETWORK_SECURITY_TYPE</span><span class="o">=</span><span class="s">openidconnect</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="na">OPENIDCONNECT_CLIENTSECRET</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="na">OPENIDCONNECT_CLIENTID</span><span class="o">=</span><span class="s">&#39;...&#39;</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="na">OPENIDCONNECT_SERVERMETADATA_JSON_TEXT</span><span class="o">=</span><span class="s">&#39;...big json text...&#39;</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="na">OPENIDCONNECT_IDTOKENROLELOCATION</span><span class="o">=</span><span class="s">&#39;roles&#39;</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Роли находятся в части «roles» ID-токена.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Как правило, преобразование роли не требуется, поскольку имя роли будет использоваться в ID-токене.</p>
</div>
<h3 id="oidc_bearer_tokens">OIDC Bearer токены</h3>
<p>Токены носителя также поддерживаются - вы можете прикрепить токен носителя JWT к любому запросу, установив HTTP-заголовок следующим образом:</p>
<div class="language-properties highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="na">Authorization</span><span class="o">:</span><span class="w"> </span><span class="s">Bearer:  &lt;JWT token&gt;</span>
</span></code></pre></div>
<p>Bearer Tokens are mostly used for automated (desktop or application) API calls - real users should just login normally using OIDC.</p>
<p>Токены носителя в основном используются для автоматизированных (настольных или прикладных) вызовов API - 
реальные пользователи должны просто входить в систему обычным образом, используя OIDC.</p>
<ol>
<li>Настройте конфигурацию OIDC (см. <a href="./#authentication-openid">Настройка OAUTH2 OpenID Connect</a>).</li>
<li>Установите конфигурацию токена носителя OIDC (см. <a href="./#bearer_token_configuration">Конфигурация</a>).</li>
<li>
<p>Получите токен Bearer с сервера OIDC. Это самая сложная часть, и есть несколько способов сделать это. 
    Один из способов, который используется - это рабочий процесс OAuth 2.0 Device Authorization Grant («Device Flow»).</p>
</li>
<li>
<p>Прикрепите его к заголовкам запроса (см. <a href="./#oidc_bearer_tokens">OIDC Bearer Tokens</a>).</p>
</li>
<li>Выполните защищенные запросы к API Geonetwork.</li>
</ol>
<p>Этот способ был протестирован с Keycloak и Azure AD. Он должен работать и с другими сервисами OIDC на основе JWT.</p>
<h4 id="_10">Проверка</h4>
<p>Токен проверяется тремя основными способами:</p>
<ol>
<li>
<p>Токен носителя будет использоваться для доступа к конечной точке <code>fo</code> («проверка токена»), указанной в конфигурации OIDC. 
    Это означает, что IDP проверяет токен (по крайней мере, его подпись и срок действия).</p>
</li>
<li>
<p>Токен на предъявителя (JWT) будет проверен на то, что его аудитория совпадает с нашей конфигурацией OIDC. 
    Это гарантирует, что кто-то не получит токен из другого сервиса и не попытается использовать его здесь. Смотрите <code>AudienceAccessTokenValidator.java</code>.</p>
</li>
<li>
<p>Токен на предъявителя (JWT) будет проверен на то, что субъект JWT и <code>fo</code> (возвращаемый от IDP) совпадают. 
    В нашем случае это не должно быть проблемой, но спецификация OAUTH2 рекомендует такую проверку. Смотрите <code>SubjectAccessTokenValidator.java</code>.</p>
</li>
</ol>
<h4 id="bearer_token_configuration">Настройка</h4>
<p>Настройте OIDC, как указано выше - убедитесь, что все работает.</p>
<p>Вместо <code>GEONETWORK_SECURITY_TYPE=openidconnect</code>, используйте <code>GEONETWORK_SECURITY_TYPE=openidconnectbearer</code>.</p>
<p>Внутри <code>WEB-INF/config-security/config-security-openidconnectbearer.xml</code>:</p>
<ol>
<li>Если вы используете keycloak (настроенный с помощью Groups в ответе <code>fo</code>), то откомментируйте боб <code>er</code> и закомментируйте боб <code>er</code>.</li>
<li>Если вы используете Azure AD (MS Graph API для групп пользователей), то откомментируйте боб <code>er</code> и закомментируйте боб <code>er</code>.</li>
</ol>
<p>Самый простой способ проверить - получить токен Bearer, а затем с помощью плагина для браузера добавить <code>Авторизация: Bearer &lt;token&gt;</code> ко всем запросам. 
Когда пользователь зайдёт в Geonetwork, он должен увидеть себя вошедшим в систему с соответствующими правами.</p>
<h4 id="_11">Другие провайдеры</h4>
<p>Это было протестировано с Azure AD (группы в MS Graph API) и KeyCloak (группы в <code>fo</code>).</p>
<p>Для других IDP, возможно, придется внести некоторые изменения.</p>
<ol>
<li>Убедитесь, что <code>or</code> и <code>or</code> корректно работают для ваших JWT-токенов.</li>
<li>Убедитесь, что группы пользователей доступны - см. интерфейс <code>er</code> и две его реализации - <code>er</code> и <code>er</code>.</li>
</ol>
<h2 id="authentication-keycloak">Настройка Keycloak</h2>
<p><a href="https://keycloak.org">Keycloak</a> - это программное решение для хранения данных аутентификации, 
объединения пользователей, посредничества в идентификации и социального входа. 
GeoNetwork может быть настроен на использование экземпляра keycloak для аутентификации.</p>
<p>Установите keycloak из инструкции или воспользуйтесь этим примером установки в docker <a href="https://www.keycloak.org/getting-started/getting-started-docker">https://www.keycloak.org/getting-started/getting-started-docker</a>.</p>
<p>Детали Keycloak определяются через переменные окружения</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>KEYCLOAK_AUTH_SERVER_URL={keycloak url}
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>KEYCLOAK_REALM={realm name}
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>KEYCLOAK_RESOURCE={client name}
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>KEYCLOAK_SECRET={client secret}
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>KEYCLOAK_DISABLE_TRUST_MANAGER={true|false}
</span></code></pre></div>
<p>Можно установить более подробные настройки keycloak, отредактировав файл <strong><code>WEB-INF/config-security/keycloak.json</code></strong>.</p>
<h3 id="url-geonetwork">Конфигурация URL-адреса клиента Geonetwork</h3>
<p>Убедитесь, что при настройке клиента был установлен правильный URL 
для перенаправления на установку geonetwork, т.е. <code>https://localhost:8443/geonetwork/*</code>. 
При неправильной настройке вы можете получить ошибку, указывающую на то, что был задан неверный URL перенаправления. 
Также если вы хотите протестировать выход из обратного канала клиента, убедитесь, 
что URL-адрес администратора также установлен на установку geonetwork.</p>
<h3 id="_12">Пример настройки пользователя/роли/группы</h3>
<h4 id="_13">Пример настройки роли</h4>
<p>В настройках роли клиента (клиенты -&gt; мой_клиент -&gt; роли). Добавьте следующие роли</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>Administrator
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>RegisteredUser
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>Guest
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>sample:UserAdmin
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>sample:Reviewer
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>sample:Editor
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>sample:RegisteredUser
</span></code></pre></div>
<h4 id="_14">Образец конфигурации группы</h4>
<ol>
<li>Перейдите в раздел «Группы keycloak» (левое меню).</li>
<li>Создайте новую группу под названием «Администратор».</li>
<li>Отредактируйте группу. Перейдите в Role Mappings -&gt; Client Roles (myclient) -&gt; выберите роли администратора 
    и нажмите кнопку «Add selected» Любой пользователь, присоединенный к группе Administrator, будет администратором сети geonetwork.</li>
</ol>
<h4 id="_15">Пример конфигурации пользователя</h4>
<ol>
<li>Перейдите в раздел «Пользователи keycloak» (левое меню).</li>
<li>Добавьте или выберите существующего пользователя. Затем перейдите к этому пользователю.</li>
<li>Перейдите в раздел «Сопоставление ролей» -&gt; «Роли клиента» (myclient) -&gt; выберите доступные роли для применения 
    и нажмите «Добавить выбранные» или перейдите в раздел «Группы» -&gt; «Доступные группы» -&gt; выберите группу «Администратор» и нажмите «Присоединиться».</li>
</ol>
<p>Аналогичная настройка описана для geoserver в <a href="https://docs.geoserver.org/latest/en/user/community/keycloak/index.html">документации geoserver</a>.</p>
<h2 id="authentication-ecas">Настройка EU Login</h2>
<p>EU Login - это центральный механизм входа в систему Европейской комиссии. 
Можно включить вход в систему с помощью этого центрального сервиса в случае, если ваши предполагаемые пользователи имеют или могут получить EU Login.</p>
<p>Чтобы включить EU Login, настройте аутентификацию, включив <code>WEB-INF/config-security/config-security-ecas.xml</code> в <code>WEB-INF/config-security/config-security.xml</code>, откомментировав следующую строку:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nt">&lt;import</span><span class="w"> </span><span class="na">resource=</span><span class="s">&quot;config-security-ecas.xml&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></div>
<p>Для EU-login требуется плагин ecas-plugin, предоставленный Европейским Союзом. 
Плагин ecas доступен через <a href="https://citnet.tech.ec.europa.eu/CITnet/nexus">CITnet</a> для различных java-контейнеров, таких как Tomcat и JBoss.</p>
<p>Для tomcat добавьте в папку tomcat lib два файла: ecas-tomcat-x.y.z.jar и log4j-x.y.z.jar. 
В папку lib скопируйте две папки из <strong><code>eulogin-tomcat-x.y.z-config.zip</code></strong>: <strong><code>org/apache/catalina/authenticator</code></strong> и <strong><code>org/apache/catalina/startup</code></strong>. 
Папка mbeans содержит файл <strong><code>mbeans-descriptors.xml</code></strong>. Папка startup содержит файл <strong><code>Authenticators.properties</code></strong>. 
Убедитесь, что JDK доверяет <a href="https://webgate.ec.europa.eu/CITnet/confluence/display/IAM/Downloads-Certificates">сертификатам ECAS</a>, 
иначе импортируйте их в хранилище ключей JVM.</p>
<p>Конфигурация EU Login определена в <strong><code>WEB-INF/config-security/config-security.properties</code></strong>. 
Можно настроить свое окружение, обновив предыдущий файл или определив переопределения свойств 
в файле <strong><code>WEB-INF/config-security/config-security-overrides.properties</code></strong>:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>cas.baseURL=https://webgate.ec.europa.eu/cas
</span></code></pre></div>
<p>Перезапустите службу и проверьте механизм аутентификации.</p>
<h2 id="authentication-shibboleth">Настройка Shibboleth</h2>
<p>Каталог может работать в федерации, защищенной SAML. Shibboleth должен быть установлен в Apache, 
как описано <a href="https://wiki.shibboleth.net/confluence/display/SHIB2/Installation">здесь</a>. 
Доступ к каталогу осуществляется через Apache. Настройте аутентификацию Shibboleth, включив <code>WEB-INF/config-security/config-security-shibboleth.xml</code> 
в <code>WEB-INF/config-security/config-security.xml</code>. Затем вы можете настроить свое окружение в файле <code>config-security-shibboleth-overrides.properties</code>.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Managing users and groups">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Managing users and groups
              </div>
            </div>
          </a>
        
        
          
          <a href="../creating-group/" class="md-footer__link md-footer__link--next" aria-label="Next: Creating group">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Creating group
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information -->
<div class="md-copyright">
  
  <span class="md-copyright__highlight">
    Copyright &copy; 2001 - 2023 FAO-UN and others
  </span>
  
  
  &mdash; Made by the
  <a
          href="https://geonetwork-opensource.org/"
          target="_blank" rel="noopener"
  >GeoNetwork Community</a>,
  built with
  <a
          href="https://squidfunk.github.io/mkdocs-material/"
          target="_blank" rel="noopener"
  >
    Material for MkDocs
  </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/geonetwork" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/_/geonetwork" target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://geonetwork-opensource.org/" target="_blank" rel="noopener" title="GeoNetwork Website" class="md-social__link">
      <?xml version="1.0" encoding="UTF-8"?>
<svg width="300px" height="301px" viewBox="0 0 300 301" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch -->
    <title>gn_logo</title>
    <desc>Created with Sketch.</desc>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="GNlogo" transform="translate(-157.000000, -1.000000)" fill-rule="nonzero">
            <g id="Group" transform="translate(157.000000, 0.105590)">
                <g id="Logo" transform="translate(0.000000, 3.000000)">
                    <path d="M212.641304,294.371739 L212.648758,294.371739 C211.621118,289.141304 184.624845,288.163043 152.745652,288.163043 C107.719565,288.163043 69.957764,281.73354 59.7475155,273.835714 L59.7624224,273.811491 C43.4925466,261.290683 29.876087,245.535093 19.7431677,227.549068 C27.2031056,240.93913 83.907764,251.501553 152.746584,251.501553 C177.136025,251.501553 199.39472,253.253106 216.299068,256.084472 C236.027329,259.390062 248.462422,264.279503 248.462422,269.645963 C248.462422,270.981056 247.693789,272.418634 246.235714,273.668012 L246.233851,274.000621 C235.996584,281.941304 224.719565,287.895652 212.641304,294.371739 Z M274.503727,242.340373 C274.503727,243.565528 274.131056,244.685404 273.408075,245.707453 C284.601242,231.096894 293.863043,214.198137 299.207143,196.107764 C299.464286,195.332609 299.591925,194.480124 299.591925,193.693789 C299.591925,176.150311 233.848137,161.931056 152.745652,161.931056 C69.4229814,161.931056 1.80838509,147.961491 1.80838509,130.421739 L1.79720497,130.077019 C0.69689441,137.475466 0.126708075,145.048137 0.126708075,152.751242 C0.126708075,163.990062 1.34161491,174.948447 3.64658385,185.495031 C6.00745342,196.595031 35.2006211,206.095342 77.6534161,211.368634 C99.7108696,214.112422 125.36646,215.536025 152.745652,215.536025 C219.988509,215.536025 274.503727,227.537888 274.503727,242.340373 Z M183.136025,88.9462733 C184.804658,105.557143 185.843478,123.795652 186.11646,143.003106 C251.136335,139.733851 299.564907,127.125466 299.564907,112.063043 C299.564907,111.274845 299.465217,110.480124 299.207143,109.709627 C293.730745,91.05 284.782919,73.8791925 273.115528,58.9350932 C274.025776,60.2552795 274.502795,61.6080745 274.502795,62.9822981 C274.503727,75.4770186 235.679814,85.9742236 183.136025,88.9462733 Z M152.67205,54.1462733 C144.200311,54.1462733 136.35559,53.9515528 128.525776,53.5779503 C126.538509,64.202795 124.82795,76.1189441 123.537578,89.0086957 C70.4180124,86.1270186 31.0071429,75.5673913 31.0071429,62.9804348 C31.0071429,61.6015528 31.4785714,60.2431677 32.3916149,58.9164596 C20.6487578,73.9555901 11.5462733,91.2186335 6.07919255,110.013354 C5.88074534,110.692547 5.86118012,111.374534 5.86118012,112.06118 C5.86118012,129.601863 72.6959627,143.82205 152.67205,143.82205 L152.67205,54.1462733 Z M209.906832,14.6962733 C209.906832,11.9813665 205.993789,9.46397516 199.340683,7.40590062 L199.348137,7.38167702 C184.654658,2.67950311 168.998758,0.136024845 152.745652,0.136024845 C136.015528,0.136024845 119.920807,2.8257764 104.851863,7.8 L104.859317,7.82049689 C98.9953416,9.7984472 95.5863354,12.1611801 95.5863354,14.6962733 C95.5863354,21.6447205 121.174845,27.2822981 152.746584,27.2822981 C184.311801,27.2822981 209.906832,21.6437888 209.906832,14.6962733 Z" id="Shape"  fill="#BABABA"></path>
                </g>
            </g>
        </g>
    </g>
</svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.view", "content.action.edit", "content.code.copy", "content.tabs.link", "navigation.tabs", "navigation.tracking", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "navigation.footer", "announce.dismiss"], "search": "../../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>